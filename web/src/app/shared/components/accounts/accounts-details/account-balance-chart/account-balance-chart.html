<z-card class="h-full flex flex-col mb-8">
  <div class="flex items-start justify-between">
    <h1 class="font-semibold flex flex-col">
      Balance evolution
      <span class="font-normal text-muted-foreground text-sm">Last 6 months</span>
    </h1>

    @if (balanceHistory().length >= 2) {
      <div
        class="flex gap-1 p-2 rounded-2xl items-center"
        [class]="isPositiveChange() ? 'bg-income' : 'bg-expense'"
      >
        <i-lucide
          [img]="trendIcon()"
          [class]="
            isPositiveChange() ? 'size-4 text-income-foreground' : 'size-4 text-expense-foreground'
          "
        />
        <span
          class="text-sm font-semibold"
          [class]="isPositiveChange() ? 'text-income-foreground' : 'text-expense-foreground'"
        >
          {{ formattedChange() }}
        </span>
      </div>
    }
  </div>

  @if (chartOptions()) {
    <apx-chart
      #chart
      [series]="chartOptions()!.series!"
      [chart]="chartOptions()!.chart!"
      [xaxis]="chartOptions()!.xaxis!"
      [yaxis]="chartOptions()!.yaxis!"
      [stroke]="chartOptions()!.stroke!"
      [fill]="chartOptions()!.fill!"
      [grid]="chartOptions()!.grid!"
      [markers]="chartOptions()!.markers!"
      [colors]="chartOptions()!.colors!"
      [tooltip]="chartOptions()!.tooltip!"
      [dataLabels]="chartOptions()!.dataLabels!"
    />
  }

  @if (balanceHistory().length > 0) {
    <z-divider />

    <div class="flex items-start justify-center">
      <div class="ml-4 grid flex-1 text-left text-sm leading-tight">
        <p class="text-xs text-muted-foreground mb-1">{{ firstMonthLabel() }}.</p>
        <span class="text-sm font-bold">{{ firstMonthBalance() }}</span>
      </div>
      <div>
        <p class="text-xs text-muted-foreground mb-1">{{ lastMonthLabel() }}.</p>
        <span class="text-sm font-bold">{{ lastMonthBalance() }}</span>
      </div>
    </div>
  }
</z-card>
