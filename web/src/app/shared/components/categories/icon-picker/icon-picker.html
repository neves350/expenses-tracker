<button
  type="button"
  class="flex h-9 w-full items-center justify-start gap-2 rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs cursor-pointer"
  zPopover
  [zContent]="iconPickerContent"
>
  @if (selectedIcon()) {
    <i-lucide [img]="iconMap[selectedIcon()]" class="size-4" />
    <span class="text-sm">{{ selectedIcon() }}</span>
  } @else {
    <span class="text-sm text-muted-foreground">Select an icon</span>
  }
</button>

<ng-template #iconPickerContent>
  <z-popover class="w-80">
    <div class="max-h-[260px] overflow-y-auto space-y-2">
      @for (group of iconGroups; track group.label) {
        <div>
          <span class="text-xs text-muted-foreground">{{ group.label }}</span>
          <div class="grid grid-cols-6 gap-1.5 mt-1.5">
            @for (icon of group.icons; track icon) {
              <button
                type="button"
                zPopoverClose
                [class]="getIconClasses(icon)"
                (click)="selectIcon(icon)"
              >
                <i-lucide [img]="iconMap[icon]" class="size-4" />
              </button>
            }
          </div>
        </div>
      }
    </div>
  </z-popover>
</ng-template>
