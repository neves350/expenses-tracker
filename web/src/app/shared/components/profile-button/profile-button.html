@if (user(); as user) {
  <button
    type="button"
    class="flex cursor-pointer items-center gap-3 outline-none"
    z-dropdown
    [zDropdownMenu]="menu"
  >
    <z-avatar
      [zSrc]="user.avatarUrl"
      [zFallback]="initials()"
      [zAlt]="user.name"
      [zSize]="'sm'"
    />

    <div class="flex flex-col items-end">
      <span class="text-sm font-medium">{{ user.name }}</span>
    </div>

    <i-lucide [img]="ChevronDownIcon" class="text-muted-foreground size-4" />
  </button>

  <z-dropdown-menu-content #menu="zDropdownMenuContent" class="w-56">
    <z-dropdown-menu-item routerLink="/profile">
      <i-lucide [img]="UserIcon" class="mr-2 size-4" />
      Profile
    </z-dropdown-menu-item>

    <z-divider class="-mx-1 my-1" />

    <!-- Currency selector -->
    <div class="text-muted-foreground px-2 py-1.5 text-xs font-medium">
      <i-lucide [img]="CoinsIcon" class="mr-1 inline size-3" />
      Currency
    </div>
    @for (curr of currencies; track curr) {
      <z-dropdown-menu-item (click)="setCurrency(curr)">
        @if (currency() === curr) {
          <i-lucide [img]="CheckIcon" class="mr-2 size-4" />
        } @else {
          <span class="mr-2 size-4"></span>
        }
        {{ curr }}
      </z-dropdown-menu-item>
    }

    <z-divider class="-mx-1 my-1" />

    <z-dropdown-menu-item (click)="logout()">
      <i-lucide [img]="LogOutIcon" class="mr-2 size-4" />
      Sign Out
    </z-dropdown-menu-item>
  </z-dropdown-menu-content>
}